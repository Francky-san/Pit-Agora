@using PitAgora.Models;
@model PitAgora.ViewModels.GererPlanningViewModel

@{
    Layout = "LayoutPrive";

    ViewBag.Title = "Gérer Planning";
}

@section css
    {
    <link href="~/css/Planning.css" rel="stylesheet" />
}

@section navbar
    {
    <ul class="navbar-nav">

        <li class="nav-item">
            <a class="nav-link active" href=@Url.Action("AccueilProf", "Professeur")>
                Accueil
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href=@Url.Action("Deconnexion", "Login")>
                Déconnexion
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href=@Url.Action("GérerPlanning", "Professeur")>
                Gérer mon planning
            </a>
        <li class="nav-item">
            <a class="nav-link" href=@Url.Action("ElevesDuProf", "Professeur")>
                Mes élèves
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href=@Url.Action("Contact", "Home")>
                Contact
            </a>
        </li>

    </ul>
}

@section Main
    {

    <div class="container -fluid">

              <!-- Variables de la page -->
    <script>
        const selectionnes = [];
        var retour = "";
        var statutModifie = false;
        var statut, prof;
    </script>

        <!-- Formulaire caché, pour transmettre certaines informations-->
        <form id="choixCours" action="" method="post">
            <input type="hidden" id="retourProf" name="professeurId" />
            <input type="hidden" id="retourCreneaux" name="creneaux" />
        </form>

        <h4 style="margin-left: 20px">
            Planning du @System.DateTime.Now.AddDays(-3).ToString("d")
            au @System.DateTime.Now.AddDays(3).ToString("d")

        </h4>

   
        @foreach (var item in @Model.PlanningSemaine)
        {
            <em> class="enTetePlanning" A compléter  </em>

            <div class="conteneurHeures">
                <span class="heure">09:00</span>
                @for (int k = 2; k < Creneau.NB_CRENEAUX_PAR_JOUR; k++)
                {
                    if (k % 2 == 0)
                    {
                        <span class="heure">@(9 + k / 2):00</span>
                    }
                }
                <span class="heure derniereHeure">19:00</span>
            </div>

            <div class="ConteneurPlanning">


                @for (int k = 0; k < Creneau.NB_CRENEAUX_PAR_JOUR; k++)
                {
                    if (item.StatutsCreneaux[k] == 0)
                    {
                        <div id=@item.StatutsCreneaux[k] class="cellulePlanning nonPropose" onclick="changerStatut(this)"
             onmouseover="mOver(this)" onmouseout="mOut(this)"></div>
                    }
                    if (item.StatutsCreneaux[k] == 1)
                    {
                        <div id=@item.StatutsCreneaux[k] class="cellulePlanning dispo" onclick="changerStatut(this)"
             onmouseover="mOver(this)" onmouseout="mOut(this)"></div>
                    }
                    if (item.StatutsCreneaux[k] == 2)
                    {
                        <div id=@item.StatutsCreneaux[k] class="cellulePlanning reserve" onclick="changerStatut(this)"
             onmouseover="mOver(this)" onmouseout="mOut(this)"></div>
                    }
                }
            </div>

        }

    }

@section Scripts {
        <script src="~/Scripts/ScriptsGererPlanning.js"></script>
        <script src="~/Scripts/FormulesMetier.js"></script>
    }



